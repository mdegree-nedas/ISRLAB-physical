DEFAULT := all

all: help

clean: stop
	sudo rm -rf ros2/build
	sudo rm -rf ros2/install
	sudo rm -rf ros2/log
	cd host && make clean

build:
	cd host && make

stop:
	docker-compose down

start: stop
	docker-compose up -d
	cd host && make start

help:
	@echo "---------------------------------------------------------------------------"
	@echo "make clean -> (requires sudo), clean ros2 autogenerated files and host venv"
	@echo "make build -> builds host venv"
	@echo "make start -> activates docker-compose in background and calls host/echo.py"
	@echo "make stop -> deactivates docker-compose"
	@echo "---------------------------------------------------------------------------"

.PHONY: clean build start stop help
